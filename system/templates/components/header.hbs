<header class="fatex-header">
    <div class="fatex-header__name">
        <label class="fatex-header__label" for="name">
            {{#if isToken}}Token-{{/if}}{{localize "FAx.Sheet.Name"}}
        </label>

        <input
            class="fatex-text-input fatex-text-input--header"
            name="name"
            type="text"
            value="{{actor.name}}"
        >
    </div>

    <div class="fatex-header__fate-points">
        <label class="fatex-header__label fatex-header__label--center" for="name">
            {{localize "FAx.Sheet.FatePoints"}}
        </label>

        <div class="fatex-header__fate-points-wrapper">
            <input
                class="fatex-text-input fatex-text-input--fp"
                name="system.fatepoints.current"
                type="text"
                value="{{actor.system.fatepoints.current}}"
                data-key="system.fatepoints.current"
                onfocusout="updateActorField(this)"
            >

            <span class="fatex-header__fatepoint-divider"> / </span>

            <input
                class="fatex-text-input fatex-text-input--fp"
                name="system.fatepoints.refresh"
                type="text"
                value="{{actor.system.fatepoints.refresh}}"
                data-key="system.fatepoints.refresh"
                onfocusout="updateActorField(this)"
            >
        </div>
    </div>
    <script type="text/javascript">
    function updateActorField(input) {
        const key = input.dataset.key;
        const value = input.value;
        const actor = game.actors.get('{{actor.id}}'); // or token if it's a token actor

        // Prepare the update object dynamically
        let updateData = {};
        updateData[key] = value;

        // Update the actor's field without reloading
        actor.update(updateData);
    }
    </script>

    {{> "systems/fatex/templates/components/header-logo.hbs"}}
</header>
